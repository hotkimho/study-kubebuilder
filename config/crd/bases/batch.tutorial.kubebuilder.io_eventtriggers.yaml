---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.15.0
  name: eventtriggers.batch.tutorial.kubebuilder.io
spec:
  group: batch.tutorial.kubebuilder.io
  names:
    kind: EventTrigger
    listKind: EventTriggerList
    plural: eventtriggers
    singular: eventtrigger
  scope: Namespaced
  versions:
  - name: v1
    schema:
      openAPIV3Schema:
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: EventTriggerSpec defines the desired state of EventTrigger
            properties:
              resourceEvents:
                items:
                  properties:
                    apiVersion:
                      description: 리소스 버전
                      type: string
                    clusterInfo:
                      description: 클러스터 정보 리소스에 대한 trigger
                      properties:
                        conditions:
                          description: 조건 목록(status, value)
                          items:
                            properties:
                              statusCondition:
                                description: 상태에 대한 조건
                                items:
                                  properties:
                                    field:
                                      description: 검사할 필드명
                                      type: string
                                    operator:
                                      description: 비교 연산자 ex) equal, notEqual, Pending,
                                        Running, Succeeded, Failed, Unknown
                                      type: string
                                    status:
                                      description: 비교할 상태
                                      type: string
                                  required:
                                  - field
                                  - operator
                                  - status
                                  type: object
                                type: array
                              valueCondition:
                                description: 값에 대한 조건
                                items:
                                  properties:
                                    field:
                                      description: 검사할 필드명
                                      type: string
                                    operator:
                                      description: 비교 연산자 ex) equal, notEqual, lessThan,
                                        greaterThan
                                      type: string
                                    value:
                                      description: 비교할 값(수치)
                                      type: string
                                  required:
                                  - field
                                  - operator
                                  - value
                                  type: object
                                type: array
                            type: object
                          type: array
                        message:
                          description: 메시지 정보
                          properties:
                            level:
                              description: 로그 레벨 ex) info, warning, error
                              type: string
                            message:
                              description: 알림 매체에 보낼 메시지 내용
                              type: string
                          required:
                          - level
                          type: object
                        notifications:
                          description: 전송할 매체(matterMost, Gmail) 정보
                          items:
                            properties:
                              channel:
                                description: 매체 채널
                                type: string
                              fromAddress:
                                description: 발신자 메일 주소
                                type: string
                              message:
                                description: 메일 내용
                                type: string
                              password:
                                description: mail 계정 비밀번호
                                type: string
                              smtpPort:
                                description: SMTP 포트
                                type: integer
                              smtpServer:
                                description: SMTP 서버 주소
                                type: string
                              subject:
                                description: 메일 제목
                                type: string
                              toAddress:
                                description: 수신자 메일 주소
                                type: string
                              type:
                                description: 매체 종류(mattermost, gmail)
                                type: string
                              url:
                                description: 매체 URL(webhook URL)
                                type: string
                              username:
                                description: mail 계정 사용자 이름
                                type: string
                            required:
                            - type
                            type: object
                          type: array
                        resource:
                          description: 리소스 정보
                          properties:
                            labels:
                              additionalProperties:
                                type: string
                              description: 리소스 레이블
                              type: object
                            name:
                              description: 리소스 이름
                              type: string
                            namespace:
                              default: default
                              description: 리소스가 속한 네임스페이스
                              type: string
                          required:
                          - name
                          - namespace
                          type: object
                      required:
                      - conditions
                      - message
                      - notifications
                      type: object
                    deployment:
                      description: 디플로이먼트 리소스에 대한 trigger
                      properties:
                        conditions:
                          description: 조건 목록(status, value)
                          items:
                            properties:
                              statusCondition:
                                description: 상태에 대한 조건
                                items:
                                  properties:
                                    field:
                                      description: 검사할 필드명
                                      type: string
                                    operator:
                                      description: 비교 연산자 ex) equal, notEqual, Pending,
                                        Running, Succeeded, Failed, Unknown
                                      type: string
                                    status:
                                      description: 비교할 상태
                                      type: string
                                  required:
                                  - field
                                  - operator
                                  - status
                                  type: object
                                type: array
                              valueCondition:
                                description: 값에 대한 조건
                                items:
                                  properties:
                                    field:
                                      description: 검사할 필드명
                                      type: string
                                    operator:
                                      description: 비교 연산자 ex) equal, notEqual, lessThan,
                                        greaterThan
                                      type: string
                                    value:
                                      description: 비교할 값(수치)
                                      type: string
                                  required:
                                  - field
                                  - operator
                                  - value
                                  type: object
                                type: array
                            type: object
                          type: array
                        message:
                          description: 메시지 정보
                          properties:
                            level:
                              description: 로그 레벨 ex) info, warning, error
                              type: string
                            message:
                              description: 알림 매체에 보낼 메시지 내용
                              type: string
                          required:
                          - level
                          type: object
                        notifications:
                          description: 전송할 매체(matterMost, Gmail) 정보
                          items:
                            properties:
                              channel:
                                description: 매체 채널
                                type: string
                              fromAddress:
                                description: 발신자 메일 주소
                                type: string
                              message:
                                description: 메일 내용
                                type: string
                              password:
                                description: mail 계정 비밀번호
                                type: string
                              smtpPort:
                                description: SMTP 포트
                                type: integer
                              smtpServer:
                                description: SMTP 서버 주소
                                type: string
                              subject:
                                description: 메일 제목
                                type: string
                              toAddress:
                                description: 수신자 메일 주소
                                type: string
                              type:
                                description: 매체 종류(mattermost, gmail)
                                type: string
                              url:
                                description: 매체 URL(webhook URL)
                                type: string
                              username:
                                description: mail 계정 사용자 이름
                                type: string
                            required:
                            - type
                            type: object
                          type: array
                        resource:
                          description: 리소스 정보
                          properties:
                            labels:
                              additionalProperties:
                                type: string
                              description: 리소스 레이블
                              type: object
                            name:
                              description: 리소스 이름
                              type: string
                            namespace:
                              default: default
                              description: 리소스가 속한 네임스페이스
                              type: string
                          required:
                          - name
                          - namespace
                          type: object
                      required:
                      - conditions
                      - message
                      - notifications
                      type: object
                    event:
                      description: 이벤트 리소스에 대한 trigger
                      properties:
                        conditions:
                          description: 조건 목록(status, value)
                          items:
                            properties:
                              statusCondition:
                                description: 상태에 대한 조건
                                items:
                                  properties:
                                    field:
                                      description: 검사할 필드명
                                      type: string
                                    operator:
                                      description: 비교 연산자 ex) equal, notEqual, Pending,
                                        Running, Succeeded, Failed, Unknown
                                      type: string
                                    status:
                                      description: 비교할 상태
                                      type: string
                                  required:
                                  - field
                                  - operator
                                  - status
                                  type: object
                                type: array
                              valueCondition:
                                description: 값에 대한 조건
                                items:
                                  properties:
                                    field:
                                      description: 검사할 필드명
                                      type: string
                                    operator:
                                      description: 비교 연산자 ex) equal, notEqual, lessThan,
                                        greaterThan
                                      type: string
                                    value:
                                      description: 비교할 값(수치)
                                      type: string
                                  required:
                                  - field
                                  - operator
                                  - value
                                  type: object
                                type: array
                            type: object
                          type: array
                        message:
                          description: 메시지 정보
                          properties:
                            level:
                              description: 로그 레벨 ex) info, warning, error
                              type: string
                            message:
                              description: 알림 매체에 보낼 메시지 내용
                              type: string
                          required:
                          - level
                          type: object
                        notifications:
                          description: 전송할 매체(matterMost, Gmail) 정보
                          items:
                            properties:
                              channel:
                                description: 매체 채널
                                type: string
                              fromAddress:
                                description: 발신자 메일 주소
                                type: string
                              message:
                                description: 메일 내용
                                type: string
                              password:
                                description: mail 계정 비밀번호
                                type: string
                              smtpPort:
                                description: SMTP 포트
                                type: integer
                              smtpServer:
                                description: SMTP 서버 주소
                                type: string
                              subject:
                                description: 메일 제목
                                type: string
                              toAddress:
                                description: 수신자 메일 주소
                                type: string
                              type:
                                description: 매체 종류(mattermost, gmail)
                                type: string
                              url:
                                description: 매체 URL(webhook URL)
                                type: string
                              username:
                                description: mail 계정 사용자 이름
                                type: string
                            required:
                            - type
                            type: object
                          type: array
                        resource:
                          description: 리소스 정보
                          properties:
                            labels:
                              additionalProperties:
                                type: string
                              description: 리소스 레이블
                              type: object
                            name:
                              description: 리소스 이름
                              type: string
                            namespace:
                              default: default
                              description: 리소스가 속한 네임스페이스
                              type: string
                          required:
                          - name
                          - namespace
                          type: object
                      required:
                      - conditions
                      - message
                      - notifications
                      type: object
                    kind:
                      description: 리로스 종류(kind)
                      type: string
                    pod:
                      description: 파드 리소스에 대한 trigger
                      properties:
                        conditions:
                          description: 조건 목록(status, value)
                          items:
                            properties:
                              statusCondition:
                                description: 상태에 대한 조건
                                items:
                                  properties:
                                    field:
                                      description: 검사할 필드명
                                      type: string
                                    operator:
                                      description: 비교 연산자 ex) equal, notEqual, Pending,
                                        Running, Succeeded, Failed, Unknown
                                      type: string
                                    status:
                                      description: 비교할 상태
                                      type: string
                                  required:
                                  - field
                                  - operator
                                  - status
                                  type: object
                                type: array
                              valueCondition:
                                description: 값에 대한 조건
                                items:
                                  properties:
                                    field:
                                      description: 검사할 필드명
                                      type: string
                                    operator:
                                      description: 비교 연산자 ex) equal, notEqual, lessThan,
                                        greaterThan
                                      type: string
                                    value:
                                      description: 비교할 값(수치)
                                      type: string
                                  required:
                                  - field
                                  - operator
                                  - value
                                  type: object
                                type: array
                            type: object
                          type: array
                        message:
                          description: 메시지 정보
                          properties:
                            level:
                              description: 로그 레벨 ex) info, warning, error
                              type: string
                            message:
                              description: 알림 매체에 보낼 메시지 내용
                              type: string
                          required:
                          - level
                          type: object
                        notifications:
                          description: 전송할 매체(matterMost, Gmail) 정보
                          items:
                            properties:
                              channel:
                                description: 매체 채널
                                type: string
                              fromAddress:
                                description: 발신자 메일 주소
                                type: string
                              message:
                                description: 메일 내용
                                type: string
                              password:
                                description: mail 계정 비밀번호
                                type: string
                              smtpPort:
                                description: SMTP 포트
                                type: integer
                              smtpServer:
                                description: SMTP 서버 주소
                                type: string
                              subject:
                                description: 메일 제목
                                type: string
                              toAddress:
                                description: 수신자 메일 주소
                                type: string
                              type:
                                description: 매체 종류(mattermost, gmail)
                                type: string
                              url:
                                description: 매체 URL(webhook URL)
                                type: string
                              username:
                                description: mail 계정 사용자 이름
                                type: string
                            required:
                            - type
                            type: object
                          type: array
                        resource:
                          description: 리소스 정보
                          properties:
                            labels:
                              additionalProperties:
                                type: string
                              description: 리소스 레이블
                              type: object
                            name:
                              description: 리소스 이름
                              type: string
                            namespace:
                              default: default
                              description: 리소스가 속한 네임스페이스
                              type: string
                          required:
                          - name
                          - namespace
                          type: object
                      required:
                      - conditions
                      - message
                      - notifications
                      type: object
                  required:
                  - apiVersion
                  - kind
                  type: object
                type: array
            type: object
          status:
            description: EventTriggerStatus defines the observed state of EventTrigger
            properties:
              resourceStatus:
                items:
                  properties:
                    conditions:
                      description: 리소스에 대한 상태
                      items:
                        properties:
                          field:
                            description: 검사한 필드명
                            type: string
                          operator:
                            description: 비교 연산자 ex) equal, notEqual, lessThan, greaterThan
                            type: string
                          result:
                            description: 현재 리소스의 상태와 조건이 일치하는지 여부(true, false)
                            type: string
                          status:
                            description: 현재 리소스의 상태
                            type: string
                          value:
                            description: 현재 리소스의 값(수치)
                            type: string
                        required:
                        - field
                        - operator
                        - result
                        type: object
                      type: array
                    firstNotificationTime:
                      description: 알림을 처음 전송한 시간
                      format: date-time
                      type: string
                    kind:
                      description: 리소스 종류
                      type: string
                    lastNotificationTime:
                      description: 마지막으로 알림을 전송한 시간
                      format: date-time
                      type: string
                    name:
                      description: 리소스 이름
                      type: string
                    notificationCount:
                      type: integer
                  required:
                  - kind
                  - name
                  - notificationCount
                  type: object
                type: array
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
